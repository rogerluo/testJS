<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="">
    <title>CheckIT</title>
    <!-- Bootstrap core CSS -->
    <link href="/css/bootstrap-theme.css" rel="stylesheet" />
    <link href="/css/bootstrap.css" rel="stylesheet" />
    <link href="/css/justified-nav.css" rel="stylesheet" />
    <style type="text/css">
        .panel > .panel-body + .panel-body {
            border-top: 1px solid #DDDDDD;
        }

        .a-key {
            width: 100px;
            text-align: right;
            float: left;
            line-height: 25px;
            font-weight: bold;
            padding-right: 10px;
            display: block;
        }

        .a-value {
            width: 620px;
            display: block;
            float: left;
            position: relative;
            padding-right: 120px;
            zoom: 1;
        }

            .a-value > .a-element {
                width: 120px;
                float: left;
                display: block;
                overflow: hidden;
                padding-top: 5px;
                height: 20px;
            }

            .a-value > .a-selected {
                width: auto;
                float: left;
                display: block;
                overflow: hidden;
                height: 20px;
                border: 1px solid #E6E6E6;
                position: relative;
                padding: 0 20px 0 5px;
                margin-right: 15px;
                margin-bottom: 2px;
            }

        .font-selected {
            color: #f00;
        }

        .a-value > .a-option {
            position: absolute;
            right: 10px;
            top: 0px;
            width: 140px;
            height: 20px;
            padding-top: 2px;
        }

        .o-more {
            float: left;
            position: relative;
            width: 70px;
            height: 20px;
            padding-right: 14px;
            line-height: 20px;
            text-align: left;
            text-decoration: none;
            cursor: pointer;
            color: #005AA0;
            font-weight: bold;
        }


        .o-multiple {
            position: relative;
            float: right;
            width: 70px;
            height: 20px;
            text-align: right;
            padding-left: 5px;
            line-height: 20px;
            cursor: pointer;
            color: #005AA0;
            font-weight: bold;
        }

        .a-list a {
            float: left;
            padding-left: 18px;
            background: url(image/icons.png) no-repeat -70px 1px;
            color: #005AA0;
        }

            .a-list a:hover {
                background: url(image/hover.png) no-repeat 0 1px;
                color: #E4393C;
            }

        .selected a, .selected a:hover {
            background: url(image/icons.png) no-repeat -70px -13px;
            color: #E4393C;
        }

        .selected {
            /*nothing to do, just as a type*/
        }

        .a-btns {
            display: none;
            padding: 10px 0;
            text-align: center;
            width: 100%;
            float: left;
        }

        .a-selected-list {
            display: none;
            padding: 10px 0;
            text-align: left;
            width: 100%;
            float: left;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="masthead">
            <h3 class="text-muted">CheckIT</h3>
            <ul class="nav nav-justified">
                <li class="active"><a href="./index.htm">Home</a></li>
                <li><a href="#">DIT</a></li>
                <li><a href="#">SIT</a></li>
                <li><a href="#">MORE</a></li>
                <li><a href="#">Contact</a></li>
            </ul>
        </div>
        <div class="page-header">
            <h1>System Information</h1>
        </div>
        <!-- Example row of columns -->
        <div class="row">
            <div class="col-md-3">
                <ul class="nav nav-pills nav-stacked">
                    <li class="active"><a href="#">System Information</a> </li>
                    <li><a href="#">Data</a> </li>
                    <ul class="nav nav-pills nav-stacked">
                        <li><a href="#">&nbsp;&nbsp;&nbsp;&nbsp;RIC Check</a> </li>
                        <li><a href="#">&nbsp;&nbsp;&nbsp;&nbsp;DCS Check</a> </li>
                    </ul>
                    <li><a href="#">Log Check</a> </li>
                </ul>
            </div>
            <div class="col-md-9" role="main">
                <!-- Product List -->
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h3 class="panel-title">Filter&nbsp;
                            <span class="glyphicon glyphicon-search"></span>
                        </h3>
                    </div>
                    <!-- selected filter -->
                    <div id="selected" class="panel-body" style="display: none">
                        <div>
                            <div class="a-key">Selected:</div>
                            <div id="Div1" class="a-value">
                            </div>
                        </div>
                    </div>
                    
                    
                    <!-- region filter -->
                    <div class="panel-body">
                        <div>
                            <div class="a-key">Region:</div>
                            <div id="regionlist" class="a-value">
                                <div class='a-option'>
                                    <div class="o-more">
                                        More<span class="glyphicon glyphicon-chevron-down"></span>
                                    </div>
                                    <div class="o-multiple">Multi&nbsp;<span class="glyphicon glyphicon-plus-sign"></span></div>
                                </div>
                            </div>
                        </div>
                    </div>
					<!-- product filter -->
				<div class="panel-body">
                        <div>
                            <div class="a-key">Product:</div>
                            <div id="productlist" class="a-value">
                                <div class='a-option'>
                                    <div class="o-more">
                                        More<span class="glyphicon glyphicon-chevron-down"></span>
                                    </div>
                                    <div class="o-multiple">Multi&nbsp;<span class="glyphicon glyphicon-plus-sign"></span></div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
				
        

                <!-- Host List -->
                <table class="table table-bordered" id="serverlist">
                    <thead>
                        <tr>
                            <th style="width:auto;" alias="Product">Product</th>
                            <th style="width:auto;" alias="Region">Region</th>
                            <th style="width:auto;" alias="ServerName">Server Name</th>
                            <th style="width:auto;" alias="IP">Host IP</th>
                            <th style="width:auto;" alias="User">User</th>
                            <th style="width:auto;" alias="Password">Password</th>
                            <th style="width:auto;" alias="CreateDate">Create On</th>
                            <th style="width:auto;" alias="UPdatedate">Update On</th>
                        </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>

                <button type="button" class="btn btn-primary" id="search">Seach</button>

            </div>
        </div>
        <!-- Site footer -->
        <div>
            <p style="text-align: center;">
                &copy; ThomsonReuters 2013
            </p>
        </div>
    </div>
    <!-- /container -->
    <!-- Placed at the end of the document so the pages load faster -->
    <!--    -->
    <script src="/js/jquery-1.10.2.js"></script>
    <script src="/js/bootstrap.js"></script>
    <!--[if lt IE 9]><script src="js/ie8-responsive-file-warning.js"></script><![endif]-->
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
    <!--     <script src="http://cdn.bootcss.com/holder/2.0/holder.min.js"></script>
    <script src="http://cdn.bootcss.com/highlight.js/7.3/highlight.min.js"></script> -->
    <script type="text/javascript">
        var allhosts, allregions, allproducts;
        var init_disp_product = 12, init_disp_region = 4;
        var selected = new Object();
        $(document).ready(function () {
            // init selected object
            selected.IsMultiChoise4Product = false;
            selected.IsMultiChoise4Region = false;
            selected.Products = new Array();
            selected.Regions = new Array();
            selected.OrderBy = "";
			selected.OrderAsc = true;

            // retrieve hosts, regions, products
            $.post("./gethostlist.php", null, function (data) {
                var dataObj = eval("(" + data + ")");
                allhosts = dataObj["host"];
                allregions = dataObj["region"];
                allproducts = dataObj["product"];
                // render hosts
                $(eval(allhosts)).each(function (index) {
                    if (index % 2 == 0)
                        $("#serverlist tbody").append("<tr style='background-color:#ccc'><td>" + this[0] + "</td><td>" + this[1] + "</td><td>" + this[2] + "</td><td>" + this[3] + "</td><td>" + this[4] + "</td><td>" + this[5] + "</td><td>" + this[6] + "</td><td>" + this[7] + "</td></tr>");
                    else
                        $("#serverlist tbody").append("<tr><td>" + this[0] + "</td><td>" + this[1] + "</td><td>" + this[2] + "</td><td>" + this[3] + "</td><td>" + this[4] + "</td><td>" + this[5] + "</td><td>" + this[6] + "</td><td>" + this[7] + "</td></tr>");
                });
                // render regions
                $(eval(allregions)).each(function (index) {
                    if (index >= init_disp_region)
                        $("#regionlist").append("<div class='a-element' style='display:none'><a href=#>" + this + "</a></div>");
                    else
                        $("#regionlist").append("<div class='a-element'><a href=#>" + this + "</a></div>");
                });
                if (eval(allregions).length <= init_disp_region) {
                    $("#regionlist .o-more").css("display", "none");
                }

                $("#regionlist").append("<div class='a-btns'><button type='button' class='btn btn-danger btn-sm disabled' style='margin-right: 10px;'>OK</button><button type='button' class='btn btn-default btn-sm'>Cancel</button></div>");

                // render product
                $(eval(allproducts)).each(function (index) {
                    if (index >= init_disp_product)
                        $("#productlist").append("<div class='a-element' style='display:none'><a href=#>" + this + "</a></div>");
                    else
                        $("#productlist").append("<div class='a-element'><a href=#>" + this + "</a></div>");
                });
                if (eval(allproducts).length <= init_disp_product) {
                    $("#productlist .o-more").css("display", "none");
                }

                $("#productlist").append("<div class='a-btns'><button type='button' class='btn btn-danger btn-sm disabled' style='margin-right: 10px;'>OK</button><button type='button' class='btn btn-default btn-sm'>Cancel</button></div>");
            });


            $("#productlist .o-more").click(function (hanlder) {
                var content = this.innerText.toLowerCase();
                if (content.indexOf("more") >= 0) {
                    // show more
                    $("#productlist .o-more").html("Fold<span class='glyphicon glyphicon-chevron-up'></span>");
                    $("#productlist .a-element").each(function () { $(this).css("display", "block"); });
                }
                else if (content.indexOf("fold") >= 0) {
                    // fold up
                    $("#productlist .o-more").html("More<span class='glyphicon glyphicon-chevron-down'></span>");
                    $("#productlist .a-element").each(function (index) {
                        if (index >= init_disp_product)
                            $(this).css("display", "none");
                    });
                }
            });

            $("#regionlist .o-more").click(function (hanlder) {
                var content = this.innerText.toLowerCase();
                if (content.indexOf("more") >= 0) {
                    // show more
                    $("#regionlist .o-more").html("Fold<span class='glyphicon glyphicon-chevron-up'></span>");
                    $("#regionlist .a-element").each(function () { $(this).css("display", "block"); });
                }
                else if (content.indexOf("fold") >= 0) {
                    // fold up
                    $("#regionlist .o-more").html("More<span class='glyphicon glyphicon-chevron-down'></span>");
                    $("#regionlist .a-element").each(function (index) {
                        if (index >= init_disp_region)
                            $(this).css("display", "none");
                    });
                }
            });

            $("#productlist .o-multiple").click(function () {
                selected.IsMultiChoise4Product = true;
                $("#productlist .a-option").css("display", "none");
                $("#productlist .a-element").each(function () {
                    $(this).css("display", "block");
                    $(this).addClass("a-list");
                });
                $("#productlist .a-btns").css("display", "block");
            });

            $("#regionlist .o-multiple").click(function () {
                selected.IsMultiChoise4Region = true;
                $("#regionlist .a-option").css("display", "none");
                $("#regionlist .a-element").each(function () {
                    $(this).css("display", "block");
                    $(this).addClass("a-list");
                });
                $("#regionlist .a-btns").css("display", "block");
            });

            $("#regionlist").delegate(".a-element a", "click", function (data) {
                //event.returnValue = false;
                event.preventDefault();
                if (selected.IsMultiChoise4Region) {
                    if ($(this).parent("div").hasClass("selected")) {
                        $(this).parent("div").removeClass("selected");
                        var hasSelected = false;
                        $("#regionlist .a-element").each(function () {
                            if ($(this).hasClass("selected")) {
                                hasSelected = true;
                                return false;
                            }
                        });
                        if (!hasSelected) $("#regionlist .btn-danger").addClass("disabled");
                    } else {
                        $(this).parent("div").addClass("selected");
                        $("#regionlist .btn-danger").removeClass("disabled");
                    }

                    return;
                }
                selected.Regions[0] = this.innerText;
                SearchHost();
            });

            $("#productlist").delegate(".a-element a", "click", function (data) {
                //event.returnValue = false;
                event.preventDefault();
                if (selected.IsMultiChoise4Product) {
                    if ($(this).parent("div").hasClass("selected")) {
                        $(this).parent("div").removeClass("selected");
                        var hasSelected = false;
                        $("#productlist .a-element").each(function () {
                           if ($(this).hasClass("selected")) {
                                hasSelected = true;
                                return false;
                            }
                        });
                        if (!hasSelected) $("#productlist .btn-danger").addClass("disabled");

                    } else {
                        $(this).parent("div").addClass("selected");
                        $("#productlist .btn-danger").removeClass("disabled");
                    }
                    return;
                }
                selected.Products[0] = this.innerText;
                SearchHost();
            });

            $("#selected").delegate("a span", "click", function (data) {
                event.preventDefault();
                if ($(this).attr("attr").toLowerCase() == "product") {
                    selected.Products = [];
                }
                else if ($(this).attr("attr").toLocaleLowerCase() == "region") {
                    selected.Regions = [];
                }
                SearchHost();
            });

            $("#regionlist").delegate(".btn-default", "click", function () {
                selected.Regions = [];
                DisableMultiChoise4Region();
            });

            $("#regionlist").delegate(".btn-danger", "click", function () {
                selected.Regions = [];
                $("#regionlist .a-element").each(function () {
                    if ($(this).hasClass("selected")) {
                        var val = $(this).find("a")[0].innerText;
                        if (val) selected.Regions.push(val);
                    }
                });
                DisableMultiChoise4Region();
                SearchHost();
            });

            function DisableMultiChoise4Region() {
                selected.IsMultiChoise4Region = false;
                $("#regionlist .a-option").css("display", "block");
                $("#regionlist .a-element").each(function (index) {
                    $(this).removeClass("a-list");
                    $(this).removeClass("selected");
                    if (index >= init_disp_region) {
                        $(this).css("display", "none");
                    }
                });
                $("#regionlist .a-btns").css("display", "none");
                $("#regionlist .btn-danger").addClass("disabled");
            }

            $("#productlist").delegate(".btn-default", "click", function () {
                selected.Products = [];
                DisableMultiChoise4Product();
            });

            $("#productlist").delegate(".btn-danger", "click", function () {
                selected.Products = [];
                $("#productlist .a-element").each(function () {
                    if ($(this).hasClass("selected")) {
                        var val = $(this).find("a")[0].innerText;
                        if (val) selected.Products.push(val);
                    }
                });
                DisableMultiChoise4Product();
                SearchHost();
            });

            function DisableMultiChoise4Product() {
                selected.IsMultiChoise4Product = false;
                $("#productlist .a-option").css("display", "block");
                $("#productlist .a-element").each(function (index) {
                    $(this).removeClass("a-list");
                    $(this).removeClass("selected");
                    if (index >= init_disp_region) {
                        $(this).css("display", "none");
                    }
                });
                $("#productlist .a-btns").css("display", "none");
                $("#productlist .btn-danger").addClass("disabled");
            }

            $("#serverlist th").click(function () {
				if ($(this).attr("alias")){
					selected.OrderBy = $(this).attr("alias");
					selected.OrderAsc = !selected.OrderAsc;
					
					$("#serverlist th span").each(function(){
						$(this).remove();
					});
					if (selected.OrderAsc)
						$(this).append("<span class='glyphicon glyphicon-arrow-up'></span>");
					else
						$(this).append("<span class='glyphicon glyphicon-arrow-down'></span>");
				}
				SearchHost();
            });

            //$("#regionlist .a-element").bind("click", function () {
            //    //$.get("./searchhost.php", { region: this.innerText }, function (data) {
            //    //    $("#serverlist tbody").html(data);

            //    //});
            //    alert(this.innerText);
            //});

            $("tbody tr:odd").css("background-color", "#ccc");
            $("#search").click(function () {
                GetDefaultHostList();
            });
        });
        function GetDefaultHostList() {
            $("#serverlist tbody").html("");
            $.post("./gethostlist.php", null, function (data) {
                //$("#serverlist tbody").html(data);
                //for (var i = 0; i < data.length; i++) {
                //    $("#serverlist tbody").append("<tr><td>" + data[i][0] + "</td><td>" + data[i][1] + "</td><td>" + data[i][2] + "</td><td>" + data[i][3] + "</td><td>" + data[i][4] + "</td><td>" + data[i][5] + "</td><td>" + data[i][6] + "</td><td>" + data[i][7] + "</td></tr>");
                //}
                $allhosts = data;
                var dataObj = eval("(" + data + ")");
                $(eval(dataObj["host"])).each(function (index) {
                    if (index % 2 == 0)
                        $("#serverlist tbody").append("<tr style='background-color:#ccc'><td>" + this[0] + "</td><td>" + this[1] + "</td><td>" + this[2] + "</td><td>" + this[3] + "</td><td>" + this[4] + "</td><td>" + this[5] + "</td><td>" + this[6] + "</td><td>" + this[7] + "</td></tr>");
                    else
                        $("#serverlist tbody").append("<tr><td>" + this[0] + "</td><td>" + this[1] + "</td><td>" + this[2] + "</td><td>" + this[3] + "</td><td>" + this[4] + "</td><td>" + this[5] + "</td><td>" + this[6] + "</td><td>" + this[7] + "</td></tr>");
                });
            });
        }

        function SearchHost() {
            $.post("./searchhost.php", { region: selected.Regions.join("|"), product: selected.Products.join("|"), orderby: selected.OrderBy, orderasc: selected.OrderAsc }, RenderHost);
        }

        function RenderHost(data) {
            if (selected.Products.length > 0 ||
                selected.Regions.length > 0) {
                $("#selected").css("display", "block");
                $("#selected .a-value").html("");
                if (selected.Products.length > 0) {
                    var innerHtml = "<div class='a-selected'>Product:";
                    for (var i = 0; i < selected.Products.length - 1; i++) {
                        innerHtml += "<strong class='font-selected'>" + selected.Products[i] + ",</strong>";
                    }
                    innerHtml += "<strong class='font-selected'>" + selected.Products[selected.Products.length - 1] + "</strong>&nbsp;<a href=#><span class='glyphicon glyphicon-remove' attr='product'></span></a></div>";
                    $("#selected .a-value").append(innerHtml);
                }

                if (selected.Regions.length > 0) {
                    var innerHtml = "<div class='a-selected'>Region:";
                    for (var i = 0; i < selected.Regions.length - 1; i++) {
                        innerHtml += "<strong class='font-selected'>" + selected.Regions[i] + ",</strong>";
                    }
                    innerHtml += "<strong class='font-selected'>" + selected.Regions[selected.Regions.length - 1] + "</strong>&nbsp;<a href=#><span class='glyphicon glyphicon-remove' attr='region'></span></a></div>";
                    $("#selected .a-value").append(innerHtml);
                }
            }
            else
                $("#selected").css("display", "none");

            $("#serverlist tbody").html("");
            //$("#serverlist tbody").html(data);
            $(eval(data)).each(function (index) {
                if (index % 2 == 0)
                    $("#serverlist tbody").append("<tr style='background-color:#ccc'><td>" + this[0] + "</td><td>" + this[1] + "</td><td>" + this[2] + "</td><td>" + this[3] + "</td><td>" + this[4] + "</td><td>" + this[5] + "</td><td>" + this[6] + "</td><td>" + this[7] + "</td></tr>");
                else
                    $("#serverlist tbody").append("<tr><td>" + this[0] + "</td><td>" + this[1] + "</td><td>" + this[2] + "</td><td>" + this[3] + "</td><td>" + this[4] + "</td><td>" + this[5] + "</td><td>" + this[6] + "</td><td>" + this[7] + "</td></tr>");
            });
			
        }


    </script>
</body>
</html>
